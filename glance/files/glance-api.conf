{% from "glance/map.jinja" import keystone with context %}
{% from "glance/map.jinja" import postgres with context %}
{%- set db_user = postgres.users.glance.username %}
{%- set db_pass = postgres.users.glance.password %}
{%- set db_name = postgres.users.glance.db -%}
{%- set glance_username = keystone.users['glance']['name'] %}
{%- set glance_password = keystone.users['glance']['password'] %}
[DEFAULT]
notification_driver = noop
container_formats = ami,ari,aki,bare,ovf,docker

[database]
connection = postgresql://{{db_user}}:{{db_pass}}@postgres.manfred.io:5432/{{db_name}}

[keystone_authtoken]
auth_uri = http://keystone.manfred.io:5000
auth_url = http://keystone.manfred.io:35357
auth_plugin = password
project_domain_id = default
user_domain_id = default
project_name = service
username = {{glance_username}}
password = {{glance_password}}

[paste_deploy]
flavor = keystone

[glance_store]
default_store = file
filesystem_store_datadir = /var/lib/glance/images/
